(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83110,(e,t,r)=>{t.exports=e.r(14938)},63150,e=>{"use strict";var t=e.i(15914),r=e.i(89708),a=e.i(83110);function n(){let e=(0,a.useRouter)(),[n,o]=(0,r.useState)(!1),[s,c]=(0,r.useState)({}),[i,l]=(0,r.useState)({}),[u,d]=(0,r.useState)({routingNumber:"",accountNumber:"",accountType:"checking",accountHolderName:"",amount:"",description:"",authorization:!1}),m=e=>{let{name:t,value:r,type:a}=e.target;if("routingNumber"===t){let e,a=(e=r.replace(/\D/g,"").slice(0,9)).length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`;d(e=>({...e,[t]:a}))}else if("accountNumber"===t){let e=r.replace(/\D/g,"");d(r=>({...r,[t]:e.length>4?`****${e.slice(-4)}`:e}))}else if("checkbox"===a){let r=e.target.checked;d(e=>({...e,[t]:r}))}else d(e=>({...e,[t]:r}));s[t]&&c(e=>({...e,[t]:""}))},b=async()=>{let e=u.routingNumber.replace(/\s/g,"");if(9===e.length)try{let t=await fetch("/api/ach/verify-routing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({routingNumber:e})}),r=await t.json();l(e=>({...e,routingValid:r.valid})),r.valid||c(e=>({...e,routingNumber:"Invalid routing number"}))}catch(e){c(e=>({...e,routingNumber:"Routing number verification failed"}))}},h=async()=>{let e=u.routingNumber.replace(/\s/g,""),t=u.accountNumber.replace(/\*/g,"");if(9===e.length&&!(t.length<4))try{let r=await fetch("/api/ach/verify-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({routingNumber:e,accountNumber:t,accountType:u.accountType})}),a=await r.json();l(e=>({...e,accountValid:a.valid,bankName:a.bankName})),a.valid||c(e=>({...e,accountNumber:"Account verification failed"}))}catch(e){c(e=>({...e,accountNumber:"Account verification failed"}))}},g=async t=>{let r;if(t.preventDefault(),r={},u.routingNumber&&9===u.routingNumber.replace(/\s/g,"").length||(r.routingNumber="Valid 9-digit routing number required"),(!u.accountNumber||u.accountNumber.replace(/\*/g,"").length<4)&&(r.accountNumber="Valid account number required"),(!u.accountHolderName||u.accountHolderName.length<3)&&(r.accountHolderName="Account holder name required"),(!u.amount||.01>parseFloat(u.amount))&&(r.amount="Amount must be at least $0.01"),(!u.description||u.description.length<3)&&(r.description="Description required (min 3 characters)"),u.authorization||(r.authorization="Authorization required for ACH transfer"),i.routingValid||(r.routingNumber="Routing number must be verified"),i.accountValid||(r.accountNumber="Account must be verified"),c(r),0===Object.keys(r).length){o(!0);try{let t=await fetch("/api/ach/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(u.amount),description:u.description,achData:{routingNumber:u.routingNumber.replace(/\s/g,""),accountNumber:u.accountNumber.replace(/\*/g,""),accountType:u.accountType,accountHolderName:u.accountHolderName,authorization:"Customer authorized ACH transfer via web form"}})}),r=await t.json();r.success?(alert(`ACH transfer initiated! Transaction ID: ${r.transactionId}
Fee: $${r.fee}
Settlement date: ${new Date(r.settlementDate).toLocaleDateString()}`),e.push("/payments")):c({submit:r.error||"Transfer failed"})}catch(e){c({submit:"Network error. Please try again."})}finally{o(!1)}}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"ACH Bank Transfer"}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Lowest fees!"})," ACH transfers cost only 0.8% + $0.25 and settle in 3 business days."]})}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Bank Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Routing Number"}),(0,t.jsx)("input",{type:"text",name:"routingNumber",value:u.routingNumber,onChange:m,onBlur:b,placeholder:"XXX XXX XXX",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.routingNumber?"border-red-500":"border-gray-300"}`}),s.routingNumber&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s.routingNumber}),i.routingValid&&(0,t.jsx)("p",{className:"text-green-500 text-sm mt-1",children:"✓ Routing number verified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account Number"}),(0,t.jsx)("input",{type:"text",name:"accountNumber",value:u.accountNumber,onChange:m,onBlur:h,placeholder:"Account number",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.accountNumber?"border-red-500":"border-gray-300"}`}),s.accountNumber&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s.accountNumber}),i.accountValid&&(0,t.jsxs)("p",{className:"text-green-500 text-sm mt-1",children:["✓ Account verified ",i.bankName&&`(${i.bankName})`]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account Type"}),(0,t.jsxs)("select",{name:"accountType",value:u.accountType,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"checking",children:"Checking"}),(0,t.jsx)("option",{value:"savings",children:"Savings"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account Holder Name"}),(0,t.jsx)("input",{type:"text",name:"accountHolderName",value:u.accountHolderName,onChange:m,placeholder:"Name on account",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.accountHolderName?"border-red-500":"border-gray-300"}`}),s.accountHolderName&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s.accountHolderName})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Payment Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Amount ($)"}),(0,t.jsx)("input",{type:"number",name:"amount",value:u.amount,onChange:m,placeholder:"0.00",step:"0.01",min:"0.01",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.amount?"border-red-500":"border-gray-300"}`}),s.amount&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s.amount})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,t.jsx)("input",{type:"text",name:"description",value:u.description,onChange:m,placeholder:"Payment description",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.description?"border-red-500":"border-gray-300"}`}),s.description&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s.description})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Authorization"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"checkbox",name:"authorization",checked:u.authorization,onChange:m,className:"mt-1 mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"I authorize the ACH transfer from my bank account. I understand this transaction will take 3 business days to settle and the fee is 0.8% + $0.25."})]}),s.authorization&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:s.authorization})]})]}),s.submit&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-800",children:s.submit})}),(0,t.jsx)("button",{type:"submit",disabled:n||!i.routingValid||!i.accountValid,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?"Processing...":"Initiate ACH Transfer"})]})]})}e.s(["default",()=>n])}]);