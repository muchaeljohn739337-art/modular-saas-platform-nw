module.exports=[6368,a=>{"use strict";var b=a.i(871),c=a.i(5798),d=a.i(3779),e=a.i(242),f=a.i(9393),g=a.i(8171),h=a.i(7669);let i="https://api.advanciapayledger.com",j=async a=>{try{let b=await fetch(`${i}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.message||`Login failed: ${b.status}`)}return await b.json()}catch(a){throw console.error("Login error:",a),a}},k=async a=>{try{let b=await fetch(`${i}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.message||`Registration failed: ${b.status}`)}return await b.json()}catch(a){throw console.error("Registration error:",a),a}},l=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch(`${i}/api/wallet`,{headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}});if(!b.ok)throw Error(`Wallet fetch failed: ${b.status}`);return await b.json()}catch(a){throw console.error("Wallet error:",a),a}},m=async(a,b={})=>{let c=localStorage.getItem("accessToken"),d={headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json",Accept:"application/json",...b.headers},...b};try{let b=await fetch(`${i}${a}`,d);if(!b.ok)throw Error(`Request failed: ${b.status}`);return await b.json()}catch(a){throw console.error("API request error:",a),a}};function n(){let{user:a,logout:b,isAuthenticated:c}=(()=>{let[a,b]=(0,h.useState)(null),[c,d]=(0,h.useState)(!0),[e,f]=(0,h.useState)(null);(0,h.useEffect)(()=>{(async()=>{d(!1)})()},[]);let g=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),b(null),f(null)},i=async a=>{d(!0),f(null);try{let c=await j(a);if(c.success){if(localStorage.setItem("accessToken",c.data.tokens.accessToken),localStorage.setItem("refreshToken",c.data.tokens.refreshToken),c.data.tokens.expiresIn){let a=Date.now()+1e3*c.data.tokens.expiresIn;localStorage.setItem("tokenExpiry",a.toString())}return b(c.data.user),{success:!0,user:c.data.user}}throw Error(c.message||"Login failed")}catch(b){let a=b.message||"Authentication failed";return f(a),{success:!1,error:a}}finally{d(!1)}},l=async a=>{d(!0),f(null);try{let b=await k(a);if(b.success)return await i({email:a.email,password:a.password});throw Error(b.message||"Registration failed")}catch(b){let a=b.message||"Registration failed";return f(a),{success:!1,error:a}}finally{d(!1)}},n=async()=>{try{let a=localStorage.getItem("refreshToken");if(!a)throw Error("No refresh token available");let b=await m("/api/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:a})});if(b.success){if(localStorage.setItem("accessToken",b.data.tokens.accessToken),localStorage.setItem("refreshToken",b.data.tokens.refreshToken),b.data.tokens.expiresIn){let a=Date.now()+1e3*b.data.tokens.expiresIn;localStorage.setItem("tokenExpiry",a.toString())}return!0}}catch(a){return console.error("Token refresh failed:",a),g(),!1}},o=()=>{let a=localStorage.getItem("tokenExpiry");return!!a&&Date.now()>parseInt(a)},p=async a=>{d(!0),f(null);try{let c=await m("/api/auth/profile",{method:"PUT",body:JSON.stringify(a)});if(c.success)return b(c.data.user),{success:!0,user:c.data.user};throw Error(c.message||"Profile update failed")}catch(b){let a=b.message||"Profile update failed";return f(a),{success:!1,error:a}}finally{d(!1)}},q=!!a&&!!localStorage.getItem("accessToken")&&!o();return{user:a,loading:c,error:e,isAuthenticated:q,login:i,register:l,logout:()=>{g(),d(!1)},refreshToken:n,updateProfile:p,clearError:()=>f(null),checkAuthStatus,isTokenExpired:o}})(),[d,e]=(0,h.useState)(null),[f,i]=(0,h.useState)(!1);(0,h.useEffect)(()=>{c&&n()},[c]);let n=async()=>{i(!0);try{let a=await l();a.success&&e(a.data)}catch(a){console.error("Failed to fetch wallet data:",a)}finally{i(!1)}},o=(a,b="USD")=>"USD"===b||"USDC"===b?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a):a.toString(),p=d?d.reduce((a,b)=>"USD"===b.currency||"USDC"===b.currency?a+b.balance:a,0):0;return c?(0,g.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#f9fafb",padding:"24px"},children:(0,g.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,g.jsxs)("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#1f2937"},children:["Welcome, ",a?.name,"!"]}),(0,g.jsx)("button",{onClick:b,style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"Logout"})]}),(0,g.jsxs)("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",marginBottom:"24px"},children:[(0,g.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:"Total Balance"}),(0,g.jsx)("p",{style:{fontSize:"32px",fontWeight:"bold",color:"#10b981"},children:f?"Loading...":o(p)})]}),d&&(0,g.jsxs)("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,g.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:"Wallet Details"}),(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map((a,b)=>(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"6px"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{fontWeight:"500",color:"#1f2937"},children:a.currency}),(0,g.jsx)("p",{style:{fontSize:"12px",color:"#6b7280"},children:a.network})]}),(0,g.jsx)("p",{style:{fontWeight:"bold",color:"#1f2937"},children:o(a.balance,a.currency)})]},b))})]}),(0,g.jsx)("div",{style:{marginTop:"32px"},children:(0,g.jsxs)("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",maxWidth:"600px",margin:"0 auto"},children:[(0,g.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"24px"},children:"Payment Processing"}),(0,g.jsxs)("div",{style:{textAlign:"center",marginBottom:"16px"},children:[(0,g.jsx)("p",{style:{color:"#6b7280",fontSize:"16px"},children:"Payment processing functionality is available. Please log in to access payment features."}),(0,g.jsx)("button",{onClick:()=>window.location.href="/login",style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Go to Login"})]})]})})]})}):(0,g.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9fafb"},children:(0,g.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,g.jsx)("h1",{children:"Please log in to access your dashboard"}),(0,g.jsx)("button",{onClick:()=>window.location.href="/login",style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",marginTop:"16px"},children:"Go to Login"})]})})}a.s(["default",()=>n],2652);var o=a.i(2652),p=a.i(9961);let q=(0,d.hoist)(o,"default"),r=(0,d.hoist)(o,"getStaticProps"),s=(0,d.hoist)(o,"getStaticPaths"),t=(0,d.hoist)(o,"getServerSideProps"),u=(0,d.hoist)(o,"config"),v=(0,d.hoist)(o,"reportWebVitals"),w=(0,d.hoist)(o,"unstable_getStaticProps"),x=(0,d.hoist)(o,"unstable_getStaticPaths"),y=(0,d.hoist)(o,"unstable_getStaticParams"),z=(0,d.hoist)(o,"unstable_getServerProps"),A=(0,d.hoist)(o,"unstable_getServerSideProps"),B=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/dashboard-backup",pathname:"/dashboard-backup",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:o}),C=(0,p.getHandler)({srcPage:"/dashboard-backup",config:u,userland:o,routeModule:B,getStaticPaths:s,getStaticProps:r,getServerSideProps:t});a.s(["config",0,u,"default",0,q,"getServerSideProps",0,t,"getStaticPaths",0,s,"getStaticProps",0,r,"handler",0,C,"reportWebVitals",0,v,"routeModule",0,B,"unstable_getServerProps",0,z,"unstable_getServerSideProps",0,A,"unstable_getStaticParams",0,y,"unstable_getStaticPaths",0,x,"unstable_getStaticProps",0,w],6368)}];

//# sourceMappingURL=24759_next_dist_esm_build_templates_pages_0b0df4d5.js.map