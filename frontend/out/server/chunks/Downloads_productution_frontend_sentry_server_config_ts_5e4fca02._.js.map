{"version":3,"sources":["../../../../../../Downloads/productution/frontend/sentry.server.config.ts"],"sourcesContent":["// This file configures the initialization of Sentry on the server.\r\n// The config you add here will be used whenever the server handles a request.\r\n// https://docs.sentry.io/platforms/javascript/guides/nextjs/\r\n// ⚠️ HIPAA COMPLIANT - DO NOT enable sendDefaultPii\r\n\r\nimport * as Sentry from \"@sentry/nextjs\";\r\n\r\nconst dsn = process.env.SENTRY_DSN || process.env.NEXT_PUBLIC_SENTRY_DSN;\r\n\r\nif (!dsn) {\r\n  console.warn(\r\n    \"⚠️  Sentry DSN not configured. Server-side error tracking disabled.\",\r\n  );\r\n} else {\r\n  Sentry.init({\r\n    dsn,\r\n    environment: process.env.NODE_ENV || \"development\",\r\n\r\n    // Performance monitoring\r\n    tracesSampleRate: process.env.NODE_ENV === \"production\" ? 0.1 : 1.0,\r\n\r\n    // Enable structured logging\r\n    enableLogs: true,\r\n\r\n    // ⚠️ HIPAA COMPLIANCE: DO NOT enable sendDefaultPii\r\n    // sendDefaultPii: false, // Explicitly disabled for HIPAA\r\n\r\n    integrations: [\r\n      // Console logging integration\r\n      Sentry.consoleLoggingIntegration({\r\n        levels: [\"log\", \"warn\", \"error\"],\r\n      }),\r\n    ],\r\n\r\n    // HIPAA-compliant data filtering\r\n    beforeSend(event, _hint) {\r\n      // Remove PII\r\n      if (event.user) {\r\n        delete event.user.email;\r\n        delete event.user.ip_address;\r\n      }\r\n\r\n      // Filter sensitive request data\r\n      if (event.request) {\r\n        if (event.request.headers) {\r\n          delete event.request.headers.authorization;\r\n          delete event.request.headers.cookie;\r\n        }\r\n\r\n        if (\r\n          event.request.query_string &&\r\n          typeof event.request.query_string === \"string\"\r\n        ) {\r\n          event.request.query_string = event.request.query_string\r\n            .replace(/token=[^&]*/gi, \"token=[FILTERED]\")\r\n            .replace(/password=[^&]*/gi, \"password=[FILTERED]\")\r\n            .replace(/api_key=[^&]*/gi, \"api_key=[FILTERED]\");\r\n        }\r\n      }\r\n\r\n      // Filter sensitive data from extra context\r\n      if (event.extra) {\r\n        const sensitiveKeys = [\r\n          \"password\",\r\n          \"token\",\r\n          \"apiKey\",\r\n          \"secret\",\r\n          \"ssn\",\r\n          \"dob\",\r\n        ];\r\n        sensitiveKeys.forEach((key) => {\r\n          if (event.extra && event.extra[key]) {\r\n            event.extra[key] = \"[FILTERED]\";\r\n          }\r\n        });\r\n      }\r\n\r\n      return event;\r\n    },\r\n  });\r\n\r\n  console.log(\"✅ Server-side Sentry initialized (HIPAA-compliant)\");\r\n}\r\n\r\n// Export logger for use in server components\r\nexport const { logger } = Sentry;\r\n"],"names":[],"mappings":"uCAKA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAM,QAAQ,GAAG,CAAC,UAAU,EAAA,+CAOhC,EAAO,IAAI,CAAC,KACV,EACA,YAAa,CAAA,YAGb,IAHqC,aAGqB,CAAxC,EAGlB,GAHgE,SAGpD,EAKZ,aAAc,CAEZ,EAAO,yBAAyB,CAAC,CAC/B,OAAQ,CAAC,MAAO,OAAQ,QAAQ,AAClC,GACD,YAGD,CAAW,EAAO,GAAF,EAAO,AAEjB,EAAM,IAAI,EAAE,CACd,OAAO,EAAM,IAAI,CAAC,KAAK,CACvB,OAAO,EAAM,IAAI,CAAC,UAAU,EAI1B,EAAM,OAAO,EAAE,CACb,EAAM,OAAO,CAAC,OAAO,EAAE,CACzB,OAAO,EAAM,OAAO,CAAC,OAAO,CAAC,aAAa,CAC1C,OAAO,EAAM,OAAO,CAAC,OAAO,CAAC,MAAM,EAInC,EAAM,OAAO,CAAC,YAAY,EACY,UAAtC,AACA,OADO,EAAM,OAAO,CAAC,YAAY,GAEjC,EAAM,OAAO,CAAC,YAAY,CAAG,EAAM,OAAO,CAAC,YAAY,CACpD,OAAO,CAAC,gBAAiB,oBACzB,OAAO,CAAC,mBAAoB,uBAC5B,OAAO,CAAC,kBAAmB,qBAAA,GAK9B,EAAM,KAAK,EAAE,AACO,AAQtB,CAPE,WACA,QACA,SACA,SACA,MACA,MACD,CACa,OAAO,CAAC,AAAC,IACjB,EAAM,KAAK,EAAI,EAAM,KAAK,CAAC,EAAI,EAAE,CACnC,EAAM,KAAK,CAAC,EAAI,CAAG,YAAA,CAEvB,GAGK,EAEX,GAEA,QAAQ,GAAG,CAAC,sDAIP,GAAM,QAAE,CAAM,CAAE,CAAG"}