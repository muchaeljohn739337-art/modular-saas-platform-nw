(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56822,e=>{"use strict";var t=e.i(15914),r=e.i(89708),o=e.i(6979);let a=(0,r.createContext)(void 0);e.s(["AuthProvider",0,({children:e})=>{let[l,u]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(localStorage.getItem("token"))try{let e=await o.api.get("/users/me");u(e.data)}catch(e){console.error("Failed to fetch user",e),localStorage.removeItem("token")}i(!1)})()},[]);let c=async e=>{localStorage.setItem("token",e);try{let e=await o.api.get("/users/me");u(e.data)}catch(e){console.error("Failed to fetch user after login",e)}};return(0,t.jsx)(a.Provider,{value:{user:l,loading:s,login:c,logout:()=>{localStorage.removeItem("token"),u(null)}},children:e})},"useAuth",0,()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}])}]);